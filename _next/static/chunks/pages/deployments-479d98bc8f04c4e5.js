(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2229],{19242:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deployments",function(){return n(91914)}])},89875:function(e,s,n){"use strict";n.d(s,{g:function(){return i}});var t=n(52322),r=n(40113),l=n(40051),a=n(79808);let i=e=>{let{perBlockValue:s,denom:n,className:i,...c}=e,o=60/l.Wv*s*1440*r.Rw;return(0,t.jsxs)("span",{className:i,...c,children:[(0,t.jsx)("strong",{children:(0,t.jsx)(a.N,{value:o,denom:n})})," ","/ month"]})}},79808:function(e,s,n){"use strict";n.d(s,{N:function(){return c}});var t=n(52322),r=n(63470),l=n(67810),a=n(54302),i=n(69793);let c=e=>{let{denom:s,value:n,showLt:c}=e,{isLoaded:o,getPriceForDenom:d}=(0,a.t)(),u=d(s),m=("string"==typeof n?parseFloat(n):n)*u,x=m>0?(0,i.Zj)(m):0;return(0,t.jsxs)("span",{className:"inline-flex items-center",children:[!o&&(0,t.jsx)(l.$j,{size:"small"}),c&&!!u&&m!==x&&"< ",!!u&&(0,t.jsx)(r.BK,{value:x,style:"currency",currency:"USD"})]})}},91914:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return er}});var t=n(52322),r=n(2784),l=n(67810),a=n(17212),i=n(36369),c=n(45340),o=n(68901),d=n(39097),u=n.n(d),m=n(55351),x=n(78780),p=n(98951),g=n(22021),h=n(50338),j=n(88054),v=n(48332),z=n(50766),f=n(49158),y=n(61690),w=n(22761),b=n(22103),N=n(42660),C=n(99118),q=n(91170),k=n(98013),A=n(92827),S=n(99913),_=n(89870),D=n(7885),L=n(41412),P=n(40400),Z=n(87520),E=n(22274),I=n(55497),M=n(86394),B=n(82876),F=n(95666),O=n(69687),W=n(17482),H=n(80179),R=n(6813),T=n(69793),K=n(40051),Q=n(90007),U=n(89875),V=n(79808),Y=n(53914),$=n(64433),X=n(16710);function G(e){let{cpuAmount:s,memoryAmount:n,storageAmount:r,gpuAmount:l=0,isActive:a}=e,i=(0,X.tA)(n),c=(0,X.tA)(r),o=" w-[110px] text-center flex items-center py-[2px] px-[4px] space-x-2",d="text-muted-foreground border-muted-foreground/20",u="opacity-100 text-primary",m="text-lg flex-shrink-0",x="flex-grow text-left text-xs leading-3 whitespace-nowrap";return(0,t.jsxs)("div",{className:"inline-flex flex-col flex-nowrap items-center divide-y overflow-hidden rounded-md border bg-popover p-0",children:[a&&(0,t.jsx)($.Z,{className:"h-[2px] w-full opacity-30"}),(0,t.jsxs)("div",{className:(0,f.cn)(o,d,{"":a}),children:[(0,t.jsx)(Y.JKp,{className:(0,f.cn)(m,d,{"":a,[u]:a})}),(0,t.jsx)("div",{className:(0,f.cn)(x,d,{"":a}),children:(0,T.v5)(s,2)+" cpu"})]}),l>0&&(0,t.jsxs)("div",{className:(0,f.cn)(o,d,{"":a}),children:[(0,t.jsx)(Y.Nrz,{className:(0,f.cn)(m,d,{"":a,[u]:a})}),(0,t.jsx)("div",{className:(0,f.cn)(x,d,{"":a}),children:l+" gpu"})]}),(0,t.jsxs)("div",{className:(0,f.cn)(o,d,{"":a}),children:[(0,t.jsx)(Y.DC3,{className:(0,f.cn)(m,d,{"":a,[u]:a})}),(0,t.jsx)("div",{className:(0,f.cn)(x,d,{"":a}),children:"".concat((0,T.v5)(i.value,2)," ").concat(i.unit)})]}),(0,t.jsxs)("div",{className:(0,f.cn)(o,d,{"":a}),children:[(0,t.jsx)(Y.WMK,{className:(0,f.cn)(m,d,{"":a,[u]:a})}),(0,t.jsx)("div",{className:(0,f.cn)(x,d,{"":a}),children:"".concat((0,T.v5)(c.value,2)," ").concat(c.unit)})]})]})}var J=n(5543),ee=n(10859);let es=e=>{let{lease:s,providers:n}=e,[a,i]=(0,r.useState)("");return(0,r.useEffect)(()=>{let e=null==n?void 0:n.find(e=>e.owner===(null==s?void 0:s.provider));e&&i(e.name)},[n]),(0,t.jsx)(u(),{href:w.iO.providerDetail(s.provider),onClick:e=>{e.stopPropagation()},children:(0,t.jsxs)(l.Ct,{variant:"outline",className:"whitespace-nowrap text-xs hover:bg-primary/20",children:[(0,t.jsx)("span",{children:(null==a?void 0:a.length)>20?(0,t.jsx)(l.WH,{title:a,children:(0,t.jsx)("div",{children:(0,O.j)(a,4,13)})}):a}),(0,t.jsx)(ee.t,{state:s.state,size:"small"})]})})},en=e=>{let{deployment:s,isSelectable:n,onSelectDeployment:a,checked:i,providers:c,refreshDeployments:o}=e,d=(0,B.useRouter)(),[u,m]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),{changeDeploymentName:j,getDeploymentData:v}=(0,p.D)(),{address:z,signAndBroadcastTx:f,isManaged:b}=(0,h.O)(),N="active"===s.state,{data:Y,isLoading:$}=(0,H.Mw)(z,{enabled:!!s&&N}),X=null==Y?void 0:Y.filter(e=>e.dseq===s.dseq),ee=Y&&!!Y.length&&Y.some(e=>e.dseq===s.dseq&&"active"===e.state),en=ee&&(null==X?void 0:X.some(e=>"active"===e.state)),et=ee?null==X?void 0:X.reduce((e,s)=>e+parseFloat(s.price.amount),0):0,er=(0,K.ab)(et||0,s.escrowBalance),el=(0,K.CP)(et||0,s.escrowBalance,parseFloat(s.escrowAccount.settled_at),s.createdAt),ea=s.name?(0,t.jsx)(t.Fragment,{children:s.name.length>20?(0,t.jsx)(l.WH,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:s.name}),(0,t.jsx)("small",{children:s.dseq})]}),children:(0,t.jsxs)("span",{className:"text-sm",children:[(0,t.jsx)("strong",{children:(0,O.x)(s.name,15)}),(0,t.jsxs)("span",{className:"inline text-xs",children:["\xa0-\xa0",(0,t.jsx)("small",{children:(0,O.x)(s.dseq,15)})]})]})}):(0,t.jsx)(l.WH,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:s.name}),(0,t.jsx)("small",{children:s.dseq})]}),children:(0,t.jsxs)("span",{className:"text-sm",children:[(0,t.jsx)("strong",{children:s.name}),(0,t.jsxs)("span",{className:"inline text-xs",children:["\xa0-\xa0",(0,t.jsx)("small",{children:(0,O.x)(s.dseq,15)})]})]})})}):(0,t.jsx)("span",{className:"inline text-sm",children:(0,t.jsx)("small",{children:s.dseq})}),ei=7>(0,q.Z)(er,new Date),ec=N&&en?null==el?void 0:el.escrow:s.escrowBalance,eo=N&&en?null==el?void 0:el.amountSpent:parseFloat(s.transferred.amount),ed=N&&en&&(0,A.Z)(null==el?void 0:el.timeLeft),eu=(0,T.zL)((0,K.qR)(et||0)),em=v(null==s?void 0:s.dseq),ex=(0,W.R)(s.escrowAccount.balance.denom),ep=e=>{null==e||e.stopPropagation(),m(!1)},eg=async(e,n)=>{g(!1);let t=y.W.getDepositDeploymentMsg(z,s.dseq,e,s.escrowAccount.balance.denom,n);await f([t])&&(o(),(0,F.B)(R._.DEPLOYMENT_DEPOSIT,{category:"deployments",label:"Deposit to deployment from list"}))},eh=async()=>{ep();let e=y.W.getCloseDeploymentMsg(z,s.dseq);await f([e])&&(a&&a(!1,s.dseq),o(),(0,F.B)(R._.CLOSE_DEPLOYMENT,{category:"deployments",label:"Close deployment from list"}))},ej=()=>{let e=w.iO.newDeployment({redeploy:s.dseq});d.push(e)};function ev(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),g(!0)}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.SC,{className:"cursor-pointer hover:bg-muted-foreground/10 [&>td]:p-2",onClick:()=>void d.push(w.iO.deploymentDetails(s.dseq)),children:[(0,t.jsx)(l.pj,{children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(G,{cpuAmount:s.cpuAmount,gpuAmount:s.gpuAmount,memoryAmount:s.memoryAmount,storageAmount:s.storageAmount,isActive:N})})}),(0,t.jsx)(l.pj,{className:"max-w-[100px] text-center",children:ea}),(0,t.jsx)(l.pj,{className:"text-center",children:N&&ed&&el&&(0,t.jsxs)("div",{className:"inline-flex items-center space-x-2",children:[(0,t.jsxs)("span",{children:["~",(0,k.Z)(null==el?void 0:el.timeLeft)]}),ei&&(0,t.jsx)(l.WH,{title:(0,t.jsxs)(t.Fragment,{children:["Your deployment will close soon,"," ",b?"Add funds":(0,t.jsx)("a",{href:"#",onClick:ev,children:"Add Funds"})," ","to keep it running."]}),children:(0,t.jsx)(S.Z,{className:"text-xs text-warning"})})]})}),(0,t.jsx)(l.pj,{className:"text-center",children:N&&!!ec&&(0,t.jsxs)("div",{className:"inline-flex",children:[(0,t.jsx)(V.N,{denom:s.escrowAccount.balance.denom,value:(0,T.zL)(N&&en&&el?null==el?void 0:el.escrow:ec,6)}),(0,t.jsx)(l.WH,{title:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)("span",{children:"Balance:"}),(0,t.jsxs)("strong",{children:[(0,T.zL)(N&&en&&el?null==el?void 0:el.escrow:ec,6),"\xa0",null==ex?void 0:ex.label]})]}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)("span",{children:"Spent:"}),(0,t.jsxs)("strong",{children:[(0,T.zL)(eo||0,2)," ",null==ex?void 0:ex.label]})]}),(0,t.jsx)("br",{}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"The escrow account balance will be fully returned to your wallet balance when the deployment is closed."})]}),children:(0,t.jsx)(_.Z,{className:"ml-2 text-xs text-muted-foreground"})}),ec<=0&&(0,t.jsx)(l.WH,{title:"Your deployment is out of funds and can be closed by your provider at any time now. You can add funds to keep active.",children:(0,t.jsx)(D.Z,{className:"ml-2 text-destructive-foreground"})})]})}),(0,t.jsx)(l.pj,{className:"text-center",children:N&&!!et&&(0,t.jsx)("div",{className:"ml-4 inline-flex",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(U.g,{denom:s.escrowAccount.balance.denom,perBlockValue:(0,T.zL)(et,10),className:"whitespace-nowrap"}),(0,t.jsx)(l.WH,{title:(0,t.jsxs)("span",{children:[eu," ",null==ex?void 0:ex.label," / month"]}),children:(0,t.jsx)(_.Z,{className:"ml-2 text-xs text-muted-foreground"})})]})})}),(0,t.jsxs)(l.pj,{className:"text-center",children:[ee&&(0,t.jsx)("div",{className:"inline-flex flex-wrap items-center",children:null==X?void 0:X.map(e=>(0,t.jsx)(es,{lease:e,providers:c},e.id))}),$&&(0,t.jsx)(l.$j,{size:"small"})]}),(0,t.jsx)(l.pj,{children:(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[n&&(0,t.jsx)(l.XZ,{checked:i,onClick:e=>{e.stopPropagation()},onCheckedChange:e=>{a&&a(e,s.dseq)}}),(0,t.jsx)("div",{className:"",children:(0,t.jsxs)(l.h_,{modal:!1,open:u,children:[(0,t.jsx)(l.$F,{asChild:!0,children:(0,t.jsx)(l.zx,{onClick:function(e){e.stopPropagation(),m(!0)},size:"icon",variant:"ghost",className:"rounded-full",children:(0,t.jsx)(L.Z,{})})}),(0,t.jsx)(l.AW,{align:"end",onMouseLeave:()=>m(!1),onClick:e=>{e.stopPropagation()},children:(0,t.jsx)(C.d,{onClickAway:()=>m(!1),children:(0,t.jsxs)("div",{children:[N&&!b&&(0,t.jsx)(Q.H,{onClick:ev,icon:(0,t.jsx)(P.Z,{fontSize:"small"}),children:"Add funds"}),(0,t.jsx)(Q.H,{onClick:()=>j(s.dseq),icon:(0,t.jsx)(Z.Z,{fontSize:"small"}),children:"Edit name"}),(null==em?void 0:em.manifest)&&(0,t.jsx)(Q.H,{onClick:()=>ej(),icon:(0,t.jsx)(E.Z,{fontSize:"small"}),children:"Redeploy"}),N&&(0,t.jsx)(Q.H,{onClick:()=>eh(),icon:(0,t.jsx)(I.Z,{fontSize:"small"}),children:"Close"})]})})})]})}),(0,t.jsx)("div",{className:"flex pr-2",children:(0,t.jsx)(M.Z,{})})]})})]}),N&&x&&(0,t.jsx)(J.y,{denom:s.escrowAccount.balance.denom,disableMin:!0,handleCancel:()=>g(!1),onDeploymentDeposit:eg})]})},et=()=>{let{address:e,signAndBroadcastTx:s,isWalletLoaded:n}=(0,h.O)(),{data:d,isFetching:C}=(0,v.wi)(),{data:q,isFetching:k,refetch:A}=(0,j.ks)(e,{enabled:!1}),[S,_]=(0,r.useState)(0),{settings:D,isSettingsInit:L}=(0,g.r)(),[P,Z]=(0,r.useState)(""),{getDeploymentName:E}=(0,p.D)(),[I,M]=(0,r.useState)(null),[B,F]=(0,r.useState)(!0),[O,W]=(0,r.useState)([]),{apiEndpoint:H}=D,[R,T]=(0,r.useState)(10),K=I?[...I].sort((e,s)=>e.createdAt<s.createdAt?1:-1):[],Q=S*R,U=K.slice(Q,Q+R),V=Math.ceil(K.length/R),[,Y]=(0,o.KO)(z.Z.deploySdl);(0,r.useEffect)(()=>{n&&L&&A()},[n,L,A,H,e]),(0,r.useEffect)(()=>{if(q){let e=q.map(e=>{let s=E(e.dseq);return{...e,name:s}});P&&(e=e.filter(e=>{var s,n;return(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(P.toLowerCase()))||(null===(n=e.dseq)||void 0===n?void 0:n.toLowerCase().includes(P.toLowerCase()))})),B&&(e=e.filter(e=>"active"===e.state)),M(e)}},[q,P,E,B]);let $=(e,s)=>{W(n=>e?n.concat([s]):n.filter(e=>e!==s))},X=async()=>{try{let n=O.map(s=>y.W.getCloseDeploymentMsg(e,"".concat(s)));await s(n)&&(A(),W([]))}catch(e){console.log(e)}},G=()=>{Y(null)};return(0,t.jsxs)(b.Z,{isLoading:k||C,isUsingSettings:!0,isUsingWallet:!0,children:[(0,t.jsx)(m.PB,{title:"Deployments"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center pb-2",children:[(0,t.jsx)(N.D,{className:"font-bold",subTitle:!0,children:"Deployments"}),q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)(l.zx,{"aria-label":"back",onClick:()=>A(),size:"icon",variant:"ghost",children:(0,t.jsx)(a.Z,{})})}),(0,t.jsx)("div",{className:"ml-8",children:(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)(l.$B,{label:"Active",checked:B,onCheckedChange:e=>{_(0),F(e)}})})}),O.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"md:ml-4",children:(0,t.jsxs)(l.zx,{onClick:X,color:"secondary",children:["Close selected (",O.length,")"]})}),(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)(x.e,{onClick:()=>{W([])},children:"Clear"})})]}),((null==I?void 0:I.length)||0)>0&&(0,t.jsxs)(u(),{href:w.iO.newDeployment(),className:(0,f.cn)("ml-auto",(0,l.dc)({variant:"default",size:"sm"})),onClick:G,children:["Deploy",(0,t.jsx)(i.Z,{className:"ml-4 rotate-45 text-sm"})]})]})]}),(((null==I?void 0:I.length)||0)>0||!!P)&&(0,t.jsx)("div",{className:"flex items-center pb-4 pt-2",children:(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)(l.II,{value:P,onChange:e=>{Z(e.target.value)},label:"Search Deployments by name",className:"w-full",type:"text",endIcon:!!P&&(0,t.jsx)(l.zx,{size:"icon",variant:"text",onClick:()=>Z(""),children:(0,t.jsx)(c.Z,{className:"text-xs"})})})})}),(null==I?void 0:I.length)===0&&!k&&!P&&(0,t.jsxs)("div",{className:"p-16 text-center",children:[(0,t.jsx)("h5",{className:"font-normal",children:B?"No active deployments":"No deployments"}),(0,t.jsxs)(u(),{href:w.iO.newDeployment(),className:(0,f.cn)((0,l.dc)({variant:"default",size:"lg"}),"mt-4"),onClick:G,children:["Deploy",(0,t.jsx)(i.Z,{className:"ml-4 rotate-45 text-sm"})]})]}),(!I||(null==I?void 0:I.length)===0)&&k&&!P&&(0,t.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,t.jsx)(l.$j,{size:"large"})}),(0,t.jsxs)("div",{children:[K.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap items-center justify-between pb-4",children:(0,t.jsxs)("span",{className:"text-xs",children:["You have ",(0,t.jsx)("strong",{children:K.length}),B?" active":""," deployments"]})}),(null==U?void 0:U.length)>0&&(0,t.jsxs)(l.iA,{children:[(0,t.jsx)(l.xD,{children:(0,t.jsxs)(l.SC,{children:[(0,t.jsx)(l.ss,{className:"w-[10%] text-center",children:"Specs"}),(0,t.jsx)(l.ss,{className:"w-[20%] text-center",children:"Name"}),(0,t.jsx)(l.ss,{className:"w-[10%] text-center",children:"Time left"}),(0,t.jsx)(l.ss,{className:"w-[10%] text-center",children:"Balance"}),(0,t.jsx)(l.ss,{className:"w-[15%] text-center",children:"Cost"}),(0,t.jsx)(l.ss,{className:"w-[15%] text-center",children:"Leases"}),(0,t.jsx)(l.ss,{className:"w-[10%]"})]})}),(0,t.jsx)(l.RM,{children:U.map(e=>(0,t.jsx)(en,{deployment:e,refreshDeployments:A,providers:d,isSelectable:!0,onSelectDeployment:$,checked:O.some(s=>s===e.dseq)},e.dseq))})]})]}),P&&0===U.length&&(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)("p",{children:"No deployment found."})}),((null==I?void 0:I.length)||0)>0&&(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(l.$R,{totalPageCount:V,setPageIndex:e=>{_(e)},pageIndex:S,pageSize:R,setPageSize:e=>{T(e),_(0)}})})]})};var er=function(){return(0,t.jsx)(et,{})}},88054:function(e,s,n){"use strict";n.d(s,{Rp:function(){return x},ks:function(){return u}});var t=n(82066),r=n(87066);n(98951);var l=n(67155),a=n(98649);n(40051),n(22761);var i=n(30195);i.z.object({dseq:i.z.string(),owner:i.z.string(),name:i.z.string(),status:i.z.string(),escrowBalance:i.z.number(),escrowAccount:i.z.object({id:i.z.object({scope:i.z.string(),xid:i.z.string()}),owner:i.z.string(),state:i.z.string(),balance:i.z.object({denom:i.z.string(),amount:i.z.string()}),transferred:i.z.object({denom:i.z.string(),amount:i.z.string()}),settled_at:i.z.string(),depositor:i.z.string(),funds:i.z.object({denom:i.z.string(),amount:i.z.string()})}),createdHeight:i.z.number(),cpuUnits:i.z.number(),gpuUnits:i.z.number(),memoryQuantity:i.z.number(),storageQuantity:i.z.number(),leases:i.z.array(i.z.object({id:i.z.string(),owner:i.z.string(),provider:i.z.object({owner:i.z.string(),name:i.z.string(),hostUri:i.z.string(),createdHeight:i.z.number(),email:i.z.string().nullable(),website:i.z.string().nullable(),lastCheckDate:i.z.string(),deploymentCount:i.z.number(),leaseCount:i.z.number(),cosmosSdkVersion:i.z.string(),akashVersion:i.z.string(),ipRegion:i.z.string(),ipRegionCode:i.z.string(),ipCountry:i.z.string(),ipCountryCode:i.z.string(),ipLat:i.z.string(),ipLon:i.z.string(),activeStats:i.z.object({cpu:i.z.number(),gpu:i.z.number(),memory:i.z.number(),storage:i.z.number()}),pendingStats:i.z.object({cpu:i.z.number(),gpu:i.z.number(),memory:i.z.number(),storage:i.z.number()}),availableStats:i.z.object({cpu:i.z.number(),gpu:i.z.number(),memory:i.z.number(),storage:i.z.number()}),uptime1d:i.z.number(),uptime7d:i.z.number(),uptime30d:i.z.number(),isValidVersion:i.z.boolean(),isOnline:i.z.boolean(),isAudited:i.z.boolean(),attributes:i.z.array(i.z.object({key:i.z.string(),value:i.z.string(),auditedBy:i.z.array(i.z.string())})),host:i.z.string(),organization:i.z.string().nullable(),statusPage:i.z.string().nullable(),locationRegion:i.z.array(i.z.string()),country:i.z.string().nullable(),city:i.z.string().nullable(),timezone:i.z.array(i.z.string()),locationType:i.z.array(i.z.string()),hostingProvider:i.z.string().nullable(),hardwareCpu:i.z.array(i.z.string()),hardwareCpuArch:i.z.array(i.z.string()),hardwareGpuVendor:i.z.array(i.z.string()),hardwareGpuModels:i.z.array(i.z.string()),hardwareDisk:i.z.array(i.z.string()),featPersistentStorage:i.z.boolean(),featPersistentStorageType:i.z.array(i.z.string()),hardwareMemory:i.z.array(i.z.string()),networkProvider:i.z.string().nullable(),networkSpeedDown:i.z.number(),networkSpeedUp:i.z.number(),tier:i.z.array(i.z.string()),featEndpointCustomDomain:i.z.boolean(),workloadSupportChia:i.z.boolean(),workloadSupportChiaCapabilities:i.z.array(i.z.string()),featEndpointIp:i.z.boolean()}),dseq:i.z.string(),gseq:i.z.number(),oseq:i.z.number(),state:i.z.string(),price:i.z.object({denom:i.z.string(),amount:i.z.string()})}))});var c=n(22021),o=n(94590);async function d(e,s){return s?(await (0,l.fe)(l.ig.deploymentList(e,s),"deployments",1e3)).map(e=>(0,a.aw)(e)):[]}function u(e,s){let{settings:n}=(0,c.r)();return(0,t.useQuery)(o.i.getDeploymentListKey(e),()=>d(n.apiEndpoint,e),s)}async function m(e,s,n){if(!s)return null;let t=await r.Z.get(l.ig.deploymentDetail(e,s,n));return(0,a.aw)(t.data)}function x(e,s,n){let{settings:r}=(0,c.r)();return(0,t.useQuery)(o.i.getDeploymentDetailKey(e,s),()=>m(r.apiEndpoint,e,s),n)}},80179:function(e,s,n){"use strict";n.d(s,{BI:function(){return m},Mw:function(){return p},rf:function(){return h}});var t=n(82066),r=n(87066),l=n(67155),a=n(51328),i=n(98649),c=n(77617),o=n(22021),d=n(94590);async function u(e,s,n){return s?(await (0,l.fe)(l.ig.leaseList(e,s,null==n?void 0:n.dseq),"leases",1e3)).map(e=>(0,i.cN)(e,n)):null}function m(e,s,n){let{settings:r}=(0,o.r)();return(0,t.useQuery)(d.i.getLeasesKey(e,null==s?void 0:s.dseq),()=>u(r.apiEndpoint,e,s),n)}async function x(e,s,n){return s?(await (0,l.fe)(l.ig.leaseList(e,s,null==n?void 0:n.dseq),"leases",1e3)).map(e=>(0,i.cN)(e,n)):null}function p(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{settings:n}=(0,o.r)();return(0,t.useQuery)(d.i.getAllLeasesKey(e),()=>x(n.apiEndpoint,e),s)}async function g(e,s,n){if(!e)return null;let t="".concat(e,"/lease/").concat(s.dseq,"/").concat(s.gseq,"/").concat(s.oseq,"/status");return(await r.Z.post(a.Me,{method:"GET",url:t,certPem:null==n?void 0:n.certPem,keyPem:null==n?void 0:n.keyPem})).data}function h(e,s,n){let{localCert:r}=(0,c.g)();return(0,t.useQuery)(d.i.getLeaseStatusKey(null==s?void 0:s.dseq,null==s?void 0:s.gseq,null==s?void 0:s.oseq),()=>g(e,s,r),n)}},98649:function(e,s,n){"use strict";n.d(s,{Ip:function(){return l},aw:function(){return a},cN:function(){return o},mt:function(){return c}});var t=n(40051);function r(e,s){return e.groups.map(e=>e.group_spec.resources.map(e=>{var n;return e.count*s(null!==(n=e.resources)&&void 0!==n?n:e.resource)}).reduce((e,s)=>e+s)).reduce((e,s)=>e+s)}function l(e,s){return e&&e.group_spec&&e.group_spec?e.group_spec.resources.map(e=>{var n;return e.count*s(null!==(n=e.resources)&&void 0!==n?n:e.resource)}).reduce((e,s)=>e+s):0}function a(e){let s=(0,t.XS)(e.escrow_account.balance);return e.escrow_account.funds&&(s+=(0,t.XS)(e.escrow_account.funds)),{dseq:e.deployment.deployment_id.dseq,state:e.deployment.state,version:e.deployment.version,denom:e.escrow_account.balance.denom,createdAt:parseInt(e.deployment.created_at),escrowBalance:s,transferred:e.escrow_account.transferred,cpuAmount:r(e,e=>parseInt(e.cpu.units.val)/1e3),gpuAmount:r(e,e=>{var s,n;return parseInt((null===(n=e.gpu)||void 0===n?void 0:null===(s=n.units)||void 0===s?void 0:s.val)||0)}),memoryAmount:r(e,e=>parseInt(e.memory.quantity.val)),storageAmount:r(e,e=>i(e.storage).map(e=>parseInt(e.quantity.val)).reduce((e,s)=>e+s,0)),escrowAccount:{...e.escrow_account},groups:[...e.groups]}}function i(e){return Array.isArray(e)?e:[e]}let c=e=>Array.isArray(e.storage)?e.storage.map(e=>parseInt(e.quantity.val)).reduce((e,s)=>e+s,0):parseInt(e.storage.quantity.val);function o(e,s){let n=s?s.groups.filter(s=>s.group_id.gseq===e.lease.lease_id.gseq)[0]:{};return{id:e.lease.lease_id.dseq+e.lease.lease_id.gseq+e.lease.lease_id.oseq,owner:e.lease.lease_id.owner,provider:e.lease.lease_id.provider,dseq:e.lease.lease_id.dseq,gseq:e.lease.lease_id.gseq,oseq:e.lease.lease_id.oseq,state:e.lease.state,price:e.lease.price,cpuAmount:s?l(n,e=>parseInt(e.cpu.units.val)/1e3):void 0,gpuAmount:s?l(n,e=>{var s,n;return parseInt((null===(n=e.gpu)||void 0===n?void 0:null===(s=n.units)||void 0===s?void 0:s.val)||0)}):void 0,memoryAmount:s?l(n,e=>parseInt(e.memory.quantity.val)):void 0,storageAmount:s?l(n,e=>i(e.storage).map(e=>parseInt(e.quantity.val)).reduce((e,s)=>e+s,0)):void 0,group:n}}}},function(e){e.O(0,[2309,2674,2721,2e3,3472,2888,9774,179],function(){return e(e.s=19242)}),_N_E=e.O()}]);